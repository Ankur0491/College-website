<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Higher Education Interactive Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: "Warm Neutral Harmony" -->
    <!-- Application Structure Plan: The SPA is an interactive dashboard for exploring Indian postgraduate programs. The architecture is designed for a top-down, filter-driven user flow. 1. **Header & Global Filters:** A persistent top navigation bar contains primary filters for Program Category (MBA, MCA, MSc IT) and a new, crucial filter for State. Adding the State filter provides a vital geographical dimension, allowing users to target specific regions, which is a common and critical part of the college selection process. 2. **Interactive Dashboard:** The main view immediately presents two high-impact charts (ROI Scatter Plot, Fees vs. Package Bar Chart) that serve as a visual summary of the filtered data, enabling quick comparison. 3. **Dynamic College Grid:** Below the charts, a filterable grid displays college cards, offering more detail at a glance. 4. **Detailed Modal View:** Clicking a card opens a modal with comprehensive information, keeping the main interface clean while providing deep-dive data on demand. This layered structure (Program/State Filters -> Visual Dashboard -> Grid View -> Detailed Modal) is highly usable as it guides the user from broad exploration to specific analysis in a logical, intuitive sequence. -->
    <!-- Visualization & Content Choices: Visualizations and content presentation are chosen to directly support the refined, dual-filter structure, with a strict adherence to NO SVG/Mermaid. 1. **ROI Analysis (Scatter Plot):** Report Info: Fees vs. Average Package. -> Goal: Show cost-benefit relationships. -> Viz Method: Interactive Scatter Plot (Chart.js). -> Interaction: Hovering reveals college details. The chart dynamically updates based on both Program and State filters, allowing for powerful regional ROI comparisons (e.g., comparing ROI for only MBA colleges in Maharashtra). -> Justification: A scatter plot is ideal for showing correlation and outliers in two-dimensional data. Library: Chart.js (Canvas). 2. **Cost vs. Outcome (Bar Chart):** Report Info: Fees and Average Packages. -> Goal: Compare absolute costs and earnings. -> Viz Method: Grouped Bar Chart (Chart.js). -> Interaction: Also updates with both Program and State filters. Tooltips show precise values. -> Justification: Bar charts excel at direct quantitative comparisons. Library: Chart.js (Canvas). 3. **State-wise Filtering (Dropdown):** Report Info: State data for each college. -> Goal: Enable geographical search. -> Presentation Method: A standard HTML `<select>` dropdown populated dynamically from the data. -> Interaction: Selecting a state filters the entire dataset, updating both charts and the college grid. -> Justification: A dropdown is the standard and most intuitive UI element for selecting from a long list of options like states. Method: HTML/JS. 4. **College Details (Structured HTML):** Report Info: All specific data points for an institution. -> Goal: Provide deep information on demand. -> Presentation Method: A clean modal layout. -> Interaction: Triggered by a click on a college card. -> Justification: A modal keeps the main dashboard uncluttered. Method: HTML/CSS/JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            background-color: #FDFBF8; /* Warm Neutral Background */
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #F1E9DA;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #D3B892;
            border-radius: 10px;
            border: 2px solid #F1E9DA;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #A0522D; /* Sienna */
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .nav-button:not(.active):hover {
            background-color: #F1E9DA; /* Light Beige */
        }
        #state-filter {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23A0522D%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 0.65rem auto;
        }
        .college-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .college-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="text-gray-800">

    <div id="app" class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#A0522D]">Indian Higher Education Explorer</h1>
            <p class="mt-2 text-lg text-gray-600">An Interactive Guide to Top MBA, MCA & MSc IT Colleges</p>
        </header>

        <nav class="bg-[#F1E9DA] p-2 rounded-lg shadow-md mb-8 sticky top-4 z-40">
            <div class="flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-4">
                <div id="program-filters" class="flex-shrink-0 flex justify-center items-center space-x-2 md:space-x-4">
                     <button data-program="All" class="nav-button font-semibold py-2 px-3 sm:px-4 rounded-md text-sm sm:text-base active">All</button>
                     <button data-program="MBA" class="nav-button font-semibold py-2 px-3 sm:px-4 rounded-md text-sm sm:text-base">MBA</button>
                     <button data-program="MCA" class="nav-button font-semibold py-2 px-3 sm:px-4 rounded-md text-sm sm:text-base">MCA</button>
                     <button data-program="MSc IT" class="nav-button font-semibold py-2 px-3 sm:px-4 rounded-md text-sm sm:text-base">MSc IT</button>
                </div>
                <div class="w-full sm:w-auto">
                    <select id="state-filter" class="w-full sm:w-48 bg-white border border-gray-300 text-gray-700 py-2 px-3 rounded-md leading-tight focus:outline-none focus:bg-white focus:border-gray-500 font-semibold cursor-pointer">
                        <option value="All">All States</option>
                    </select>
                </div>
            </div>
        </nav>
        
        <main id="content-area">
            
            <section id="charts-section" class="mb-12">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl sm:text-2xl font-bold text-center mb-4 text-[#A0522D]">Return on Investment (ROI) Analysis</h2>
                        <p class="text-center text-gray-600 mb-4 text-sm">This chart plots each college's average salary against its fees. Colleges in the top-left offer the highest return.</p>
                        <div class="chart-container">
                            <canvas id="roiChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl sm:text-2xl font-bold text-center mb-4 text-[#A0522D]">Fees vs. Placement Package</h2>
                        <p class="text-center text-gray-600 mb-4 text-sm">Compare total fees (light brown) against the average placement package (dark brown).</p>
                        <div class="chart-container">
                            <canvas id="feesVsPackageChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="colleges-section">
                 <h2 class="text-3xl font-bold text-center mb-6 text-[#A0522D]">Explore Colleges</h2>
                 <div id="college-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                 </div>
            </section>
        </main>
    </div>

    <div id="college-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div id="modal-content" class="bg-[#FDFBF8] rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar relative">
            
        </div>
    </div>


    <script>
        const collegeData = [
            { "id": 1, "institute_name": "IIM Ahmedabad", "program_category": "MBA", "city": "Ahmedabad", "state": "Gujarat", "ownership": "Public", "nirf_rank": 1, "fees_lakh": 25.0, "avg_pkg_lpa": 31.58, "exams": "CAT, GMAT, GRE", "website": "https://www.iima.ac.in/" },
            { "id": 2, "institute_name": "IIM Bangalore", "program_category": "MBA", "city": "Bengaluru", "state": "Karnataka", "ownership": "Public", "nirf_rank": 2, "fees_lakh": 24.5, "avg_pkg_lpa": 32.50, "exams": "CAT, GMAT, GRE", "website": "https://www.iim-b.ac.in/" },
            { "id": 3, "institute_name": "IIM Kozhikode", "program_category": "MBA", "city": "Kozhikode", "state": "Kerala", "ownership": "Public", "nirf_rank": 3, "fees_lakh": 20.5, "avg_pkg_lpa": 28.05, "exams": "CAT, GMAT, GRE", "website": "https://www.iimk.ac.in/" },
            { "id": 4, "institute_name": "IIT Delhi", "program_category": "MBA", "city": "New Delhi", "state": "Delhi", "ownership": "Public", "nirf_rank": 4, "fees_lakh": 11.2, "avg_pkg_lpa": 20.06, "exams": "CAT", "website": "https://dms.iitd.ac.in/" },
            { "id": 5, "institute_name": "IIM Calcutta", "program_category": "MBA", "city": "Kolkata", "state": "West Bengal", "ownership": "Public", "nirf_rank": 5, "fees_lakh": 25.0, "avg_pkg_lpa": 31.05, "exams": "CAT, GMAT, GRE", "website": "https://www.iimcal.ac.in/" },
            { "id": 6, "institute_name": "IIM Mumbai (NITIE)", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Public", "nirf_rank": 6, "fees_lakh": 9.0, "avg_pkg_lpa": 26.0, "exams": "CAT", "website": "https://www.iimmumbai.ac.in/" },
            { "id": 7, "institute_name": "IIM Lucknow", "program_category": "MBA", "city": "Lucknow", "state": "Uttar Pradesh", "ownership": "Public", "nirf_rank": 7, "fees_lakh": 13.0, "avg_pkg_lpa": 30.0, "exams": "CAT, GMAT, GRE", "website": "https://www.iiml.ac.in/" },
            { "id": 8, "institute_name": "IIM Indore", "program_category": "MBA", "city": "Indore", "state": "Madhya Pradesh", "ownership": "Public", "nirf_rank": 8, "fees_lakh": 20.63, "avg_pkg_lpa": 25.68, "exams": "CAT, GMAT, GRE", "website": "https://www.iimidr.ac.in/" },
            { "id": 9, "institute_name": "XLRI Jamshedpur", "program_category": "MBA", "city": "Jamshedpur", "state": "Jharkhand", "ownership": "Private", "nirf_rank": 9, "fees_lakh": 28.6, "avg_pkg_lpa": 28.0, "exams": "XAT, GMAT, GRE", "website": "https://www.xlri.ac.in/" },
            { "id": 10, "institute_name": "IIT Bombay (SJMSOM)", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Public", "nirf_rank": 10, "fees_lakh": 11.35, "avg_pkg_lpa": 26.64, "exams": "CAT, MAH CET", "website": "https://www.som.iitb.ac.in/" },
            { "id": 11, "institute_name": "MDI Gurgaon", "program_category": "MBA", "city": "Gurgaon", "state": "Haryana", "ownership": "Private", "nirf_rank": 11, "fees_lakh": 26.0, "avg_pkg_lpa": 26.0, "exams": "CAT", "website": "https://www.mdi.ac.in/" },
            { "id": 12, "institute_name": "SIBM Pune", "program_category": "MBA", "city": "Pune", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 13, "fees_lakh": 24.6, "avg_pkg_lpa": 26.77, "exams": "SNAP", "website": "https://www.sibm.edu/" },
            { "id": 13, "institute_name": "SPJIMR Mumbai", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 20, "fees_lakh": 24.0, "avg_pkg_lpa": 32.0, "exams": "CAT, GMAT", "website": "https://www.spjimr.org/" },
            { "id": 14, "institute_name": "NMIMS Mumbai", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 21, "fees_lakh": 10.0, "avg_pkg_lpa": 13.0, "exams": "NMAT", "website": "https://www.nmims.edu/" },
            { "id": 15, "institute_name": "Great Lakes, Chennai", "program_category": "MBA", "city": "Chennai", "state": "Tamil Nadu", "ownership": "Private", "nirf_rank": 34, "fees_lakh": 20.8, "avg_pkg_lpa": 15.1, "exams": "CAT, XAT, CMAT", "website": "https://www.greatlakes.edu.in/" },
            { "id": 16, "institute_name": "GIM Goa", "program_category": "MBA", "city": "Sanquelim", "state": "Goa", "ownership": "Private", "nirf_rank": 37, "fees_lakh": 20.15, "avg_pkg_lpa": 14.81, "exams": "CAT, XAT, CMAT, GMAT", "website": "https://www.gim.ac.in/" },
            { "id": 17, "institute_name": "K J Somaiya, Mumbai", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 63, "fees_lakh": 22.3, "avg_pkg_lpa": 12.79, "exams": "CAT, XAT, CMAT, NMAT", "website": "https://www.somaiya.edu/kjsim/" },
            { "id": 18, "institute_name": "NIT Trichy", "program_category": "MCA", "city": "Tiruchirappalli", "state": "Tamil Nadu", "ownership": "Public", "nirf_rank": 9, "fees_lakh": 2.1, "avg_pkg_lpa": 12.37, "exams": "NIMCET", "website": "https://www.nitt.edu/" },
            { "id": 19, "institute_name": "NIT Surathkal", "program_category": "MCA", "city": "Surathkal", "state": "Karnataka", "ownership": "Public", "nirf_rank": 17, "fees_lakh": 2.0, "avg_pkg_lpa": 7.0, "exams": "NIMCET", "website": "https://www.nitk.ac.in/" },
            { "id": 20, "institute_name": "NIT Warangal", "program_category": "MCA", "city": "Warangal", "state": "Telangana", "ownership": "Public", "nirf_rank": 21, "fees_lakh": 1.4, "avg_pkg_lpa": 10.0, "exams": "NIMCET", "website": "https://www.nitw.ac.in/" },
            { "id": 21, "institute_name": "VIT Vellore", "program_category": "MCA", "city": "Vellore", "state": "Tamil Nadu", "ownership": "Private", "nirf_rank": 10, "fees_lakh": 2.74, "avg_pkg_lpa": 8.0, "exams": "VITMEE", "website": "https://www.vit.ac.in/" },
            { "id": 22, "institute_name": "JNU, Delhi", "program_category": "MCA", "city": "New Delhi", "state": "Delhi", "ownership": "Public", "nirf_rank": 2, "fees_lakh": 0.04, "avg_pkg_lpa": 10.0, "exams": "CUET-PG", "website": "https://www.jnu.ac.in/" },
            { "id": 23, "institute_name": "Delhi University", "program_category": "MCA", "city": "New Delhi", "state": "Delhi", "ownership": "Public", "nirf_rank": 6, "fees_lakh": 0.47, "avg_pkg_lpa": 16.0, "exams": "CUET-PG", "website": "https://www.du.ac.in/" },
            { "id": 24, "institute_name": "VJTI Mumbai", "program_category": "MCA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Public", "nirf_rank": 104, "fees_lakh": 0.3, "avg_pkg_lpa": 7.0, "exams": "MAH MCA CET", "website": "https://www.vjti.ac.in/" },
            { "id": 25, "institute_name": "Christ University", "program_category": "MCA", "city": "Bengaluru", "state": "Karnataka", "ownership": "Private", "nirf_rank": 101, "fees_lakh": 4.38, "avg_pkg_lpa": 6.1, "exams": "Karnataka PGCET, KMAT", "website": "https://christuniversity.in/" },
            { "id": 26, "institute_name": "DA-IICT", "program_category": "MSc IT", "city": "Gandhinagar", "state": "Gujarat", "ownership": "Private", "nirf_rank": 1, "fees_lakh": 3.3, "avg_pkg_lpa": 14.5, "exams": "Institute Entrance Test", "website": "https://www.daiict.ac.in/" },
            { "id": 27, "institute_name": "IIT Bombay", "program_category": "MSc IT", "city": "Mumbai", "state": "Maharashtra", "ownership": "Public", "nirf_rank": 3, "fees_lakh": 0.4, "avg_pkg_lpa": 20.0, "exams": "IIT JAM", "website": "https://www.iitb.ac.in/" },
            { "id": 28, "institute_name": "University of Madras", "program_category": "MSc IT", "city": "Chennai", "state": "Tamil Nadu", "ownership": "Public", "nirf_rank": 47, "fees_lakh": 0.53, "avg_pkg_lpa": 5.0, "exams": "TANCET/Merit", "website": "https://www.unom.ac.in/" },
            { "id": 29, "institute_name": "Loyola College", "program_category": "MSc IT", "city": "Chennai", "state": "Tamil Nadu", "ownership": "Private", "nirf_rank": 7, "fees_lakh": 2.0, "avg_pkg_lpa": 6.0, "exams": "TANCET/Merit", "website": "https://www.loyolacollege.edu/" },
            { "id": 30, "institute_name": "St. Xavier's College, Mumbai", "program_category": "MSc IT", "city": "Mumbai", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 5, "fees_lakh": 0.16, "avg_pkg_lpa": 7.5, "exams": "University Entrance Test", "website": "https://xaviers.edu/" },
            { "id": 31, "institute_name": "Faculty of Management Studies (FMS)", "program_category": "MBA", "city": "New Delhi", "state": "Delhi", "ownership": "Public", "nirf_rank": 9, "fees_lakh": 2.32, "avg_pkg_lpa": 34.1, "exams": "CAT", "website": "https://fms.edu/" },
            { "id": 32, "institute_name": "SCMHRD, Pune", "program_category": "MBA", "city": "Pune", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 15, "fees_lakh": 23.76, "avg_pkg_lpa": 23.71, "exams": "SNAP", "website": "https://www.scmhrd.edu/" },
            { "id": 33, "institute_name": "IMT Ghaziabad", "program_category": "MBA", "city": "Ghaziabad", "state": "Uttar Pradesh", "ownership": "Private", "nirf_rank": 35, "fees_lakh": 21.38, "avg_pkg_lpa": 12.0, "exams": "CAT, XAT, GMAT", "website": "https://www.imt.edu/" },
            { "id": 34, "institute_name": "MICA, Ahmedabad", "program_category": "MBA", "city": "Ahmedabad", "state": "Gujarat", "ownership": "Private", "nirf_rank": 32, "fees_lakh": 23.0, "avg_pkg_lpa": 19.21, "exams": "CAT, XAT, GMAT, MICAT", "website": "https://www.mica.ac.in/" },
            { "id": 35, "institute_name": "BIMTECH, Noida", "program_category": "MBA", "city": "Greater Noida", "state": "Uttar Pradesh", "ownership": "Private", "nirf_rank": 64, "fees_lakh": 14.0, "avg_pkg_lpa": 11.1, "exams": "CAT, XAT, CMAT", "website": "https://www.bimtech.ac.in/" },
            { "id": 36, "institute_name": "Welingkar, Mumbai", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 84, "fees_lakh": 14.0, "avg_pkg_lpa": 12.53, "exams": "CAT, XAT, CMAT, ATMA", "website": "https://www.welingkar.org/" },
            { "id": 37, "institute_name": "FORE School of Management", "program_category": "MBA", "city": "New Delhi", "state": "Delhi", "ownership": "Private", "nirf_rank": 53, "fees_lakh": 18.27, "avg_pkg_lpa": 16.01, "exams": "CAT, XAT, GMAT", "website": "https://www.fsm.ac.in/" },
            { "id": 38, "institute_name": "SIBM, Bengaluru", "program_category": "MBA", "city": "Bengaluru", "state": "Karnataka", "ownership": "Private", "nirf_rank": 40, "fees_lakh": 19.84, "avg_pkg_lpa": 14.47, "exams": "SNAP", "website": "https://www.sibm.edu.in/" },
            { "id": 39, "institute_name": "SIOM, Nashik", "program_category": "MBA", "city": "Nashik", "state": "Maharashtra", "ownership": "Private", "nirf_rank": 50, "fees_lakh": 10.0, "avg_pkg_lpa": 13.0, "exams": "SNAP", "website": "https://www.siom.in/" },
            { "id": 40, "institute_name": "Jamnalal Bajaj (JBIMS)", "program_category": "MBA", "city": "Mumbai", "state": "Maharashtra", "ownership": "Public", "nirf_rank": 10, "fees_lakh": 6.5, "avg_pkg_lpa": 28.02, "exams": "MAH CET, CAT, CMAT", "website": "https://www.jbims.edu/" }
        ];

        let roiChart, feesVsPackageChart;
        let currentProgram = 'All';
        let currentState = 'All';

        const renderCollegeCard = (college) => {
            const roi = college.fees_lakh > 0 ? (college.avg_pkg_lpa / college.fees_lakh) : Infinity;
            return `
                <div class="college-card bg-white rounded-lg shadow-md p-5 flex flex-col cursor-pointer" data-college-id="${college.id}">
                    <div class="flex-grow">
                        <div class="flex justify-between items-start">
                            <h3 class="text-lg font-bold text-[#A0522D] pr-2">${college.institute_name}</h3>
                            <span class="flex-shrink-0 text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded-full">${college.program_category}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-3">${college.city}, ${college.state}</p>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-semibold">Avg. Package:</span> ₹${college.avg_pkg_lpa} LPA</p>
                            <p><span class="font-semibold">Fees:</span> ₹${college.fees_lakh.toFixed(2)} L</p>
                            <p><span class="font-semibold">ROI:</span> <span class="font-bold ${roi > 4 ? 'text-green-600' : (roi > 1 ? 'text-amber-600' : 'text-red-600')}">${isFinite(roi) ? roi.toFixed(2) + 'x' : 'N/A'}</span></p>
                        </div>
                    </div>
                    <div class="mt-4 pt-3 border-t border-gray-200 text-right">
                        <span class="text-blue-600 font-semibold hover:underline text-sm">View Details &rarr;</span>
                    </div>
                </div>
            `;
        };
        
        const renderModalContent = (college) => {
            return `
                <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl z-10">&times;</button>
                <div class="p-6 sm:p-8">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="md:col-span-2">
                            <h2 class="text-2xl sm:text-3xl font-bold text-[#A0522D]">${college.institute_name}</h2>
                            <p class="text-md text-gray-600 mt-1">${college.city}, ${college.state}</p>
                            <div class="mt-4 flex flex-wrap gap-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">NIRF #${college.nirf_rank}</span>
                                <span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${college.ownership}</span>
                            </div>
                        </div>
                        <div class="text-left md:text-right">
                            <a href="${college.website}" target="_blank" rel="noopener noreferrer" class="inline-block bg-[#A0522D] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#80421D] transition-colors">
                                Visit Website &rarr;
                            </a>
                        </div>
                    </div>

                    <div class="mt-6 border-t pt-6">
                        <h3 class="text-xl font-semibold mb-3 text-gray-700">Program Details (${college.program_category})</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center md:text-left">
                            <div class="bg-[#F1E9DA] p-4 rounded-lg">
                                <h4 class="font-bold text-lg">Avg. Placement</h4>
                                <p class="text-3xl font-bold mt-2 text-[#A0522D]">₹${college.avg_pkg_lpa} LPA</p>
                            </div>
                             <div class="bg-[#F1E9DA] p-4 rounded-lg">
                                <h4 class="font-bold text-lg">Program Cost</h4>
                                <p class="text-3xl font-bold mt-2 text-[#A0522D]">₹${college.fees_lakh.toFixed(2)} L</p>
                            </div>
                            <div class="bg-[#F1E9DA] p-4 rounded-lg">
                                <h4 class="font-bold text-lg">Key Exams</h4>
                                <p class="text-md font-semibold mt-2 text-gray-800">${college.exams}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };
        
        const createRoiChart = (data) => {
            const ctx = document.getElementById('roiChart').getContext('2d');
            const chartData = {
                datasets: [{
                    label: 'Colleges',
                    data: data.map(college => ({
                        x: college.fees_lakh,
                        y: college.avg_pkg_lpa,
                        roi: college.fees_lakh > 0 ? ((college.avg_pkg_lpa) / college.fees_lakh).toFixed(2) + 'x' : 'N/A',
                        name: college.institute_name
                    })),
                    backgroundColor: '#A0522D',
                    borderColor: '#A0522D',
                    pointRadius: 6,
                    pointHoverRadius: 10
                }]
            };

            if (roiChart) roiChart.destroy();
            roiChart = new Chart(ctx, {
                type: 'scatter',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const d = context.raw;
                                    return `${d.name}: ROI ${d.roi} (Fees: ₹${d.x.toFixed(1)}L, Pkg: ₹${d.y}LPA)`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Program Fees (Lakhs INR)', font: { weight: 'bold' } },
                            ticks: { callback: value => `₹${value}` }
                        },
                        y: {
                            title: { display: true, text: 'Average Package (LPA)', font: { weight: 'bold' } },
                            beginAtZero: true
                        }
                    }
                }
            });
        };

        const createFeesVsPackageChart = (data) => {
            const ctx = document.getElementById('feesVsPackageChart').getContext('2d');
            
            const limitedData = data.slice(0, 15);

            const labels = limitedData.map(c => c.institute_name.length > 16 ? c.institute_name.substring(0, 15) + '...' : c.institute_name);
            const feesData = limitedData.map(c => c.fees_lakh);
            const packageData = limitedData.map(c => c.avg_pkg_lpa);

            const chartData = {
                labels: labels,
                datasets: [
                    {
                        label: 'Total Fees (Lakhs)',
                        data: feesData,
                        backgroundColor: '#D3B892',
                        borderColor: '#D3B892',
                        borderWidth: 1
                    },
                    {
                        label: 'Avg. Package (LPA)',
                        data: packageData,
                        backgroundColor: '#A0522D',
                        borderColor: '#A0522D',
                        borderWidth: 1
                    }
                ]
            };

            if (feesVsPackageChart) feesVsPackageChart.destroy();
            feesVsPackageChart = new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Amount (in Lakhs INR)', font: { weight: 'bold' } }
                        },
                         x: {
                            ticks: {
                                autoSkip: false,
                            }
                        }
                    }
                }
            });
        };

        const updateDisplay = () => {
            const filteredData = collegeData.filter(c => {
                const programMatch = currentProgram === 'All' || c.program_category === currentProgram;
                const stateMatch = currentState === 'All' || c.state === currentState;
                return programMatch && stateMatch;
            });
            
            const sortedData = [...filteredData].sort((a,b) => b.avg_pkg_lpa - a.avg_pkg_lpa);

            const collegeGrid = document.getElementById('college-grid');
            collegeGrid.innerHTML = sortedData.length ? sortedData.map(renderCollegeCard).join('') : '<p class="text-center text-gray-500 col-span-full">No colleges match the selected criteria.</p>';
            
            createRoiChart(sortedData);
            createFeesVsPackageChart(sortedData);
            
            document.querySelectorAll('[data-college-id]').forEach(card => {
                card.addEventListener('click', (e) => {
                    const collegeId = parseInt(e.currentTarget.dataset.collegeId, 10);
                    const college = collegeData.find(c => c.id === collegeId);
                    document.getElementById('modal-content').innerHTML = renderModalContent(college);
                    const modal = document.getElementById('college-modal');
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    document.getElementById('close-modal').addEventListener('click', () => {
                        modal.classList.add('hidden');
                        modal.classList.remove('flex');
                    });
                });
            });
        };

        document.addEventListener('DOMContentLoaded', () => {
            const stateFilter = document.getElementById('state-filter');
            const uniqueStates = [...new Set(collegeData.map(c => c.state))].sort();
            uniqueStates.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateFilter.appendChild(option);
            });

            updateDisplay();

            document.getElementById('program-filters').addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    currentProgram = e.target.dataset.program;
                    document.querySelectorAll('#program-filters button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    updateDisplay();
                }
            });

            stateFilter.addEventListener('change', (e) => {
                currentState = e.target.value;
                updateDisplay();
            });

            const modal = document.getElementById('college-modal');
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'college-modal') {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });
        });
    </script>
</body>
</html>
